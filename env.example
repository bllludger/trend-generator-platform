# Скопируйте в .env и заполните значения. Секреты не коммитить!
# env.example — справочник переменных без реальных ключей.

APP_ENV=local
CORS_ORIGINS=
TRUSTED_PROXY_IPS=

# PostgreSQL (обязательно)
POSTGRES_DB=trends
POSTGRES_USER=trends
POSTGRES_PASSWORD=your_password
DATABASE_URL=postgresql+psycopg2://trends:your_password@db:5432/trends

# Redis и Celery (обязательно)
REDIS_PASSWORD=your_redis_password
REDIS_URL=redis://:your_redis_password@redis:6379/0
CELERY_BROKER_URL=redis://:your_redis_password@redis:6379/1
CELERY_RESULT_BACKEND=redis://:your_redis_password@redis:6379/2

# Telegram (обязательно)
TELEGRAM_BOT_TOKEN=
# Username бота без @ (для deep link «Попробовать этот тренд»). Пример: NanoBananaBot
TELEGRAM_BOT_USERNAME=
TELEGRAM_CHANNEL_URL=
# Обязательная подписка для новых пользователей: username канала без @ (например nanobanana_al). Пусто = не требовать.
SUBSCRIPTION_CHANNEL_USERNAME=nanobanana_al

# Провайдер генерации: openai, huggingface, replicate, google_vertex, gemini
IMAGE_PROVIDER=gemini

# OpenAI (обязательно если IMAGE_PROVIDER=openai)
OPENAI_API_KEY=
OPENAI_IMAGE_MODEL=dall-e-2
OPENAI_VISION_MODEL=gpt-4o
OPENAI_RATE_LIMIT_QPS=2
OPENAI_REQUEST_TIMEOUT=120.0

# Gemini (если IMAGE_PROVIDER=gemini)
GEMINI_API_KEY=
GEMINI_PROJECT_ID=
GEMINI_LOCATION=us-central1
GEMINI_IMAGE_MODEL=gemini-2.5-flash-image
GEMINI_TIMEOUT=120.0

# Размер/формат изображений
IMAGE_SIZE=1024x1024
IMAGE_FORMAT=png
GENERATION_COST_TOKENS=1
MAX_FILE_SIZE_MB=10
ALLOWED_IMAGE_EXTENSIONS=.jpg,.jpeg,.png,.webp

# Пути
STORAGE_BASE_PATH=/data/generated_images
PROMPTS_BASE_PATH=prompts

# Воркеры
UVICORN_WORKERS=2
MAX_WORKER_CONCURRENCY=2
CELERY_TASK_RETRY_DELAY=5
CELERY_TASK_MAX_RETRIES=3

# Админ API (рекомендуется)
ADMIN_API_KEY=

# Админка UI (обязательно; пароль не admin/password/123456)
ADMIN_UI_USERNAME=admin
ADMIN_UI_PASSWORD=
ADMIN_UI_PASSWORD_HASH=
ADMIN_UI_PASSWORD_HASH_BCRYPT=
ADMIN_UI_PASSWORD_HASH_SHA256=
ADMIN_UI_SESSION_SECRET=min_16_chars_secret_here
ADMIN_UI_SESSION_TTL=3600
ADMIN_UI_COOKIE_SECURE=false
ADMIN_UI_COOKIE_SAMESITE=strict
ADMIN_UI_API_BASE=http://localhost:8000

# JWT для новой админки
JWT_SECRET_KEY=

# Лимиты входа
LOGIN_RATE_LIMIT_ATTEMPTS=5
LOGIN_RATE_LIMIT_WINDOW_SECONDS=900

# Монетизация (Telegram Stars): курс для отображения в рублях
# 1 Star ≈ $0.013; при ~100 ₽/$ → 1.3. Меняйте под актуальный курс.
STAR_TO_RUB=1.3

# Оплата переводом на карту (альтернативный способ оплаты)
# Если BANK_TRANSFER_CARD пуст — кнопка «Не знаю как купить Stars» не показывается.
# При заполнении — в боте появляется флоу: выбор тарифа → реквизиты → отправка чека → распознавание суммы → зачисление.
BANK_TRANSFER_CARD=
# Комментарий к переводу (опционально — показывается пользователю при оплате)
BANK_TRANSFER_COMMENT=

# Внутренние сервисы
CLEANUP_API_BASE=http://cleanup:8001
CLEANUP_TEMP_TTL_HOURS=24
HTTP_CLIENT_TIMEOUT=10.0
HTTP_CLIENT_TIMEOUT_LONG=30.0

# Circuit breaker
CB_FAILURE_THRESHOLD=5
CB_OPEN_SECONDS=30

# Логирование
REQUEST_ID_HEADER=X-Request-Id
LOG_FILE=
LOG_MAX_BYTES=10000000
LOG_BACKUP_COUNT=5

# Состояние
USER_STATE_TTL=3600
IDEMPOTENCY_TTL=300
