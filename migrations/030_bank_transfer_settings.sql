-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø–ª–∞—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É: —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, –ø—Ä–æ–º–ø—Ç—ã Vision, –¥–æ–ø—É—Å–∫–∏, —Ç–µ–∫—Å—Ç—ã –±–æ—Ç–∞.
-- –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ (id=1). –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º –∏–∑ –∞–¥–º–∏–Ω–∫–∏ ¬´–û–ø–ª–∞—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–º¬ª.
CREATE TABLE IF NOT EXISTS bank_transfer_settings (
    id INTEGER PRIMARY KEY DEFAULT 1 CHECK (id = 1),
    enabled BOOLEAN NOT NULL DEFAULT FALSE,
    card_number VARCHAR(32) NOT NULL DEFAULT '',
    comment TEXT NOT NULL DEFAULT '',
    receipt_system_prompt TEXT NOT NULL DEFAULT '–¢—ã ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —á–µ–∫–æ–≤ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤. –ò–∑–≤–ª–µ–∫–∏ —Å—É–º–º—É –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ —Ä—É–±–ª—è—Ö –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û —á–∏—Å–ª–æ–º (—Ä—É–±–ª–∏ —Å –∫–æ–ø–µ–π–∫–∞–º–∏ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä 150.00). –ï—Å–ª–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –Ω–µ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ ‚Äî –æ—Ç–≤–µ—Ç—å NOT_FOUND.',
    receipt_user_prompt TEXT NOT NULL DEFAULT '–ù–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —á–µ–∫ –∏–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞. –ù–∞–π–¥–∏ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ —Ä—É–±–ª—è—Ö –∏ –≤–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û —á–∏—Å–ª–æ. –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: 85.00, 150, 33.50. –ï—Å–ª–∏ —Å—É–º–º—ã –Ω–µ—Ç ‚Äî –æ—Ç–≤–µ—Ç—å NOT_FOUND.',
    receipt_vision_model VARCHAR(64) NOT NULL DEFAULT 'gpt-4o',
    amount_tolerance_abs REAL NOT NULL DEFAULT 1.0,
    amount_tolerance_pct REAL NOT NULL DEFAULT 0.02,
    step1_description TEXT NOT NULL DEFAULT 'üí≥ *–û–ø–ª–∞—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É*\n\n–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –∫—É–ø–∏—Ç—å Telegram Stars ‚Äî –º–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É –û–∑–æ–Ω –ë–∞–Ω–∫–∞. –ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º —á–µ–∫ –∏ –∑–∞—á–∏—Å–ª–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ:',
    step2_requisites TEXT NOT NULL DEFAULT 'üí≥ *–û–ø–ª–∞—Ç–∞: {pack_name}*\n\nüì¶ –ü–∞–∫–µ—Ç: *{tokens}* –≥–µ–Ω–µ—Ä–∞—Ü–∏–π\nüí∞ –°—É–º–º–∞ –∫ –ø–µ—Ä–µ–≤–æ–¥—É: *{expected_rub} ‚ÇΩ*\n\nüè¶ –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã: `{card}`\n{comment_line}\n\n‚ö†Ô∏è *–ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ (—Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —Ñ–æ—Ç–æ).* –ë–µ–∑ —á–µ–∫–∞ –æ–ø–ª–∞—Ç–∞ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.\n\n–ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º —Å—É–º–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –∑–∞—á–∏—Å–ª–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.',
    success_message TEXT NOT NULL DEFAULT '‚úÖ *–û–ø–ª–∞—Ç–∞ –∑–∞—Å—á–∏—Ç–∞–Ω–∞!*\n\n–ü–∞–∫–µ—Ç: *{pack_name}*\n–ù–∞—á–∏—Å–ª–µ–Ω–æ: *{tokens}* –≥–µ–Ω–µ—Ä–∞—Ü–∏–π\n–í–∞—à –±–∞–ª–∞–Ω—Å: *{balance}* –≥–µ–Ω–µ—Ä–∞—Ü–∏–π\n\n–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ —Ñ–æ—Ç–æ –±—É–¥—É—Ç –±–µ–∑ watermark!',
    amount_mismatch_message TEXT NOT NULL DEFAULT '‚ùå *–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É.*\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ–∫ –µ—â—ë —Ä–∞–∑ (—Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —Ñ–æ—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∞).\n–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤–∏–¥–Ω–∞ —Å—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞.',
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

INSERT INTO bank_transfer_settings (id, enabled, card_number, comment)
VALUES (1, FALSE, '', '')
ON CONFLICT (id) DO NOTHING;
