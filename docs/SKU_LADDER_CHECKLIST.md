# –ß–µ–∫–ª–∏—Å—Ç: –∂—ë—Å—Ç–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –ª–µ—Å—Ç–Ω–∏—Ü—ã SKU (–¢–ó)

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–Ω—É [sku_ladder_hard_fix_1e77e5d9.plan.md](.cursor/plans/sku_ladder_hard_fix_1e77e5d9.plan.md).

---

## P0. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ SKU –≤ –ø—Ä–æ–¥–∞–∂–µ (ACTIVE)

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 1 | **trial (99‚≠ê)** ‚Äî —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º, 1 —Ä–∞–∑ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç, fallback | ‚úÖ | `app/services/payments/service.py` ‚Äî PRODUCT_LADDER_IDS; –º–∏–≥—Ä–∞—Ü–∏—è 044 ‚Äî —Ü–µ–Ω—ã/order_index; –±–æ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ `user.trial_purchased` –≤ paywall_buy |
| 2 | **avatar_pack (349‚≠ê)** ‚Äî entry outcome, –≤—Ö–æ–¥ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ | ‚úÖ | –ú–∏–≥—Ä–∞—Ü–∏—è 044, —Å–ø–∏—Å–æ–∫ –ª–µ—Å—Ç–Ω–∏—Ü—ã |
| 3 | **dating_pack (499‚≠ê)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–µ–Ω–µ–∂–Ω—ã–π outcome, AOV | ‚úÖ | –ú–∏–≥—Ä–∞—Ü–∏—è 044, –±–µ–π–¥–∂ ¬´Best value¬ª –≤ UI |
| 4 | **creator (699‚≠ê)** ‚Äî anchor, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç | ‚úÖ | –ú–∏–≥—Ä–∞—Ü–∏—è 044, –±–µ–π–¥–∂ ¬´Max¬ª –≤ UI |

---

## –ö–Ω–æ–ø–∫–∞ ¬´–ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ¬ª

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 5 | –í –º–µ–Ω—é –∫–Ω–æ–ø–∫–∞ ¬´üõí –ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ¬ª (–Ω–µ ¬´–ö—É–ø–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏¬ª) | ‚úÖ | `app/bot/main.py`: `menu.btn.shop` ‚Üí ¬´–ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ¬ª, `main_menu_keyboard()` |
| 6 | –ü–æ –Ω–∞–∂–∞—Ç–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω —Ç–æ–ª—å–∫–æ —Å 4 —Ç–∞—Ä–∏—Ñ–∞–º–∏ (trial, avatar_pack, dating_pack, creator) | ‚úÖ | `_show_shop()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `list_product_ladder_packs()` |
| 7 | –ù–∏–∫–∞–∫–∏–µ –¥—Ä—É–≥–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è | ‚úÖ | –í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `list_product_ladder_packs()`, –Ω–µ `list_active_packs()` |

---

## P0. –ß—Ç–æ —É–±—Ä–∞—Ç—å –∏–∑ –ø—Ä–æ–¥–∞–∂–∏

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 8 | **session 229‚≠ê** –∏ **studio 349‚≠ê** ‚Äî enabled=FALSE –≤ –ë–î | ‚úÖ | `migrations/044_sku_ladder_disable_legacy.sql` |
| 9 | session/studio –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ paywall | ‚úÖ | Paywall –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `list_product_ladder_packs()`; guard `pack_id not in PRODUCT_LADDER_IDS` –≤ paywall_buy |
| 10 | session/studio –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ ¬´–ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ¬ª | ‚úÖ | `_show_shop()` ‚Äî —Ç–æ–ª—å–∫–æ –ª–µ—Å—Ç–Ω–∏—Ü–∞ |
| 11 | session/studio –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ bank transfer | ‚úÖ | `bank_transfer_start` ‚Äî `list_product_ladder_packs()`; guard –≤ `bank_pack_selected` |
| 12 | –ù–µ–ª—å–∑—è –∫—É–ø–∏—Ç—å —Å—Ç–∞—Ä—ã–µ session-–ø–∞–∫–∏ —á–µ—Ä–µ–∑ Stars –∏–ª–∏ callback | ‚úÖ | `paywall_buy`: `if pack_id not in PRODUCT_LADDER_IDS` ‚Üí –æ—Ç–∫–∞–∑ |
| 13 | –ù–µ–ª—å–∑—è –∫—É–ø–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π callback bank_pack:session / bank_pack:studio | ‚úÖ | `bank_pack_selected`: `if pack_id not in PRODUCT_LADDER_IDS` ‚Üí –æ—Ç–∫–∞–∑ |

---

## Legacy token packs

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 14 | Legacy token packs (starter, standard, plus, pro, premium, ultra) –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é | ‚úÖ | –í–µ–∑–¥–µ –ª–µ—Å—Ç–Ω–∏—Ü–∞ —á–µ—Ä–µ–∑ `list_product_ladder_packs()`; seed_default_packs –Ω–µ –º–µ–Ω—è–ª–∏ |

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–ø–ª–∞–Ω, –ø. 9)

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 15 | **Trial:** –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É; –ø–æ—Å–ª–µ Trial ‚Äî –∞–ø—Å–µ–π–ª —Å –∑–∞—á—ë—Ç–æ–º 99‚≠ê | ‚úÖ | deliver_hd: `_try_upsell_after_hd` –¥–ª—è trial ‚Üí ¬´–î–æ–ø–ª–∞—Ç–∏ –¥–æ Avatar/Dating ‚Äî 99‚≠ê —É–∂–µ —É—á—Ç–µ–Ω—ã¬ª; –∫–Ω–æ–ø–∫–∏ upgrade –≤ session_status –¥–ª—è trial |
| 16 | **Unlock –∑–∞ 2‚≠ê** –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω –∏–∑ UX | ‚úÖ | `app/paywall/keyboard.py`: –∫–Ω–æ–ø–∫–∞ ¬´–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞ Stars¬ª –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ |
| 17 | **Paywall guard** –≤ paywall_buy –∏ bank_pack_selected | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–∫–∞ `pack_id not in PRODUCT_LADDER_IDS` –≤ –æ–±–æ–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö |
| 18 | **–ú–µ—Ç—Ä–∏–∫–∏:** share_trial_purchases, avg_stars_per_pay_success | ‚úÖ | `GET /admin/telemetry/product-metrics`: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ –æ—Ç–≤–µ—Ç |
| 19 | **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç:** dating_pack = ¬´Best value¬ª, creator = ¬´Max¬ª, Trial –±–µ–∑ ¬´–≤—ã–≥–æ–¥–Ω–æ¬ª | ‚úÖ | `_show_shop`, take_more (–ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω), balance_tariffs ‚Äî –±–µ–π–¥–∂–∏ –≤ –ø–æ–¥–ø–∏—Å–∏ –∫–Ω–æ–ø–æ–∫ |
| 20 | **–ê–≤—Ç–æ-–∞–ø—Å–µ–π–ª –ø–æ—Å–ª–µ Trial:** –ø–æ—Å–ª–µ hd_delivered –ø–æ–∫–∞–∑–∞—Ç—å ¬´–î–æ–ø–ª–∞—Ç–∏ –¥–æ Avatar/Dating ‚Äî 99‚≠ê —É–∂–µ —É—á—Ç–µ–Ω—ã¬ª | ‚úÖ | `app/workers/tasks/deliver_hd.py`: –≤–µ—Ç–∫–∞ –¥–ª—è pack.is_trial –≤ `_try_upsell_after_hd` |

---

## –®–∞–±–ª–æ–Ω ¬´–±–∞–ª–∞–Ω—Å + —Ç–∞—Ä–∏—Ñ—ã¬ª (–ø. 10 –ø–ª–∞–Ω–∞)

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 21 | –ï–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –±–∞–ª–∞–Ω—Å (—Å–Ω–∏–º–∫–∏/HD –∏–ª–∏ 0) | ‚úÖ | `_format_balance_line` –≤ –±–æ—Ç–µ; `get_balance_line` –≤ `app/services/balance_tariffs.py` |
| 22 | –¢–µ–∫—Å—Ç ¬´–•–æ—á–µ—à—å –±–æ–ª—å—à–µ —Ñ–æ—Ç–æ? –ü–æ–ø–æ–ª–Ω–∏ –±–∞–ª–∞–Ω—Å:¬ª + —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å —Ü–µ–Ω–∞–º–∏ (Stars –∏ ‚ÇΩ) | ‚úÖ | `_show_shop`, take_more –ø—Ä–∏ –ª–∏–º–∏—Ç–µ, `build_balance_tariffs_message` |
| 23 | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ ¬´–í—ã–±–∏—Ä–∞–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–∞–∫–µ—Ç üëá¬ª | ‚úÖ | –í–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö |
| 24 | Inline-–∫–Ω–æ–ø–∫–∏ –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Ç–∞—Ä–∏—Ñ (paywall:{id}), ¬´üí≥ –ù–µ –∑–Ω–∞—é –∫–∞–∫ –∫—É–ø–∏—Ç—å Stars¬ª, ¬´üìã –í –º–µ–Ω—é¬ª | ‚úÖ | `_show_shop`, balance_tariffs |
| 25 | **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** ‚Äî —Å–ª–µ–¥–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —à–∞–±–ª–æ–Ω—É (–±–∞–ª–∞–Ω—Å + —Ç–∞—Ä–∏—Ñ—ã + –∫–Ω–æ–ø–∫–∏) | ‚úÖ | `app/workers/tasks/generate_take.py`: –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–µ–≤—å—é –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `build_balance_tariffs_message` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ |
| 26 | **–ü—Ä–∏ —è–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –±–∞–ª–∞–Ω—Å–∞** (–ø—Ä–æ—Ñ–∏–ª—å, ¬´–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å¬ª) ‚Äî —Ç–æ—Ç –∂–µ —à–∞–±–ª–æ–Ω | ‚úÖ | `shop:open` ‚Üí `_show_shop()` —Å –±–∞–ª–∞–Ω—Å–æ–º —Å–≤–µ—Ä—Ö—É |
| 27 | **–ü—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Å–Ω–∏–º–∫–æ–≤** ‚Äî —ç–∫—Ä–∞–Ω –≤ —Ç–æ–º –∂–µ —à–∞–±–ª–æ–Ω–µ (–±–∞–ª–∞–Ω—Å + —Ç–∞—Ä–∏—Ñ—ã + –∫–Ω–æ–ø–∫–∏) | ‚úÖ | `take_more`: –≤–µ—Ç–∫–∞ –ø—Ä–∏ `not session_svc.can_take(session)` |

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å |
|---|----------|--------|----------------|
| 28 | –ú–∏–≥—Ä–∞—Ü–∏—è 044 –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≤ start.sh | ‚úÖ | `start.sh`: –±–ª–æ–∫ –¥–ª—è `044_sku_ladder_disable_legacy.sql` |
| 29 | Admin API: GET /admin/bank-transfer/settings –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç packs_for_buttons –∏–∑ –ª–µ—Å—Ç–Ω–∏—Ü—ã | ‚úÖ | `app/api/routes/admin.py`: `out["packs_for_buttons"]` –∏–∑ `list_product_ladder_packs()` |

---

## –ò—Ç–æ–≥

- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ —á–µ–∫–ª–∏—Å—Ç—É:** –≤—Å–µ –ø—É–Ω–∫—Ç—ã 1‚Äì29 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.
- **–ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –ª–µ—Å—Ç–Ω–∏—Ü–∞ (main variant)** –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞: trial 99‚≠ê, avatar_pack 349‚≠ê, dating_pack 499‚≠ê, creator 699‚≠ê ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ SKU –≤ –ø—Ä–æ–¥–∞–∂–µ; session/studio –æ—Ç–∫–ª—é—á–µ–Ω—ã; guard –≤ paywall –∏ bank; unlock –∑–∞ 2‚≠ê —É–±—Ä–∞–Ω; –º–µ—Ç—Ä–∏–∫–∏ –∏ –∞–≤—Ç–æ-–∞–ø—Å–µ–π–ª –ø–æ—Å–ª–µ Trial –¥–æ–±–∞–≤–ª–µ–Ω—ã; —à–∞–±–ª–æ–Ω ¬´–±–∞–ª–∞–Ω—Å + —Ç–∞—Ä–∏—Ñ—ã¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –ø—Ä–∏ ¬´–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å¬ª –∏ –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞.

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: –∑–∞–π—Ç–∏ –≤ –±–æ—Ç–∞ ‚Üí ¬´–ö—É–ø–∏—Ç—å —Ç–∞—Ä–∏—Ñ¬ª ‚Üí –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ 4 —Ç–∞—Ä–∏—Ñ–∞; –≤—ã–∑–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é `paywall:session` –∏–ª–∏ `bank_pack:studio` ‚Üí ¬´–ü–∞–∫–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω¬ª; –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–Ω–∏–º–∫–∞ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –±–∞–ª–∞–Ω—Å–æ–º –∏ –∫–Ω–æ–ø–∫–∞–º–∏ —Ç–∞—Ä–∏—Ñ–æ–≤.
